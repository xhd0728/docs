---
title: "Server Alias Reuse Mechanism"
icon: "book-copy"
---

## Why Alias and Rename

In multi-agent systems or multi-role collaboration tasks, you may want multiple modules to reuse the same code logic, but exhibit different behaviors or configurations in the reasoning workflow.

For example, you might use two different large models in the same task, acting as **"Responder"** and **"Reviewer"**.

UltraRAG provides a simple mechanism: configure multiple logical aliases for the same Server module, enabling parallel, decoupled, and personalized execution flows.

## How to Use

### 1. Configure Alias Servers

In `pipeline.yaml`, you can define multiple logical aliases for the same path under the `servers` field:

```yaml
servers:
  agent1: servers/generation
  agent2: servers/generation
```

Here, both `agent1` and `agent2` point to the same `servers/generation` module, but will subsequently execute and be configured independently.

### 2. Call Each Alias Separately in the Pipeline

In the pipeline, you can call these two aliases as different roles:

```yaml
pipeline:
- agent1.generate
- agent2.generate
```

UltraRAG treats these calls as two independent server instances for construction and execution.

## Example

Example pipeline file (`examples/multi_agent.yaml`):

```yaml
# MCP Server
servers:
  agent1: servers/generation
  agent2: servers/generation

# MCP Client Pipeline
pipeline:
- agent1.generate
- agent2.generate
```

Build with the following command:

```shell
ultrarag build examples/multi_agent.yaml
```

The generated server configuration is as follows:

```yaml
agent1:
  base_url: http://localhost:12301
  model_name: gpt-5
  sampling_params:
    temperature: 0.7
    top_p: 0.8
    top_k: 20
    max_tokens: 512
    stop: ["<|im_end|>", "<|end_search_query|>"]
    extra_body:
      chat_template_kwargs:
        enable_thinking: false

agent2:
  base_url: http://localhost:12302
  model_name: deepseek-r2
  sampling_params:
    temperature: 0.7
    top_p: 0.8
    top_k: 20
    max_tokens: 512
    stop: ["<|im_end|>", "<|end_search_query|>"]
    extra_body:
      chat_template_kwargs:
        enable_thinking: false
```

As you can see, `agent1` and `agent2` each have independent model, port, and sampling parameter configurations.

## Summary

By setting multiple aliases for the same Server module, UltraRAG supports highly flexible multi-agent workflow orchestration and concurrent execution. You can construct complex collaboration scenarios like building blocks through renaming, without copying code or module logic. Furthermore, you can combine it with branch routing, loop iterative reasoning, and other mechanisms to build a complete agent system.